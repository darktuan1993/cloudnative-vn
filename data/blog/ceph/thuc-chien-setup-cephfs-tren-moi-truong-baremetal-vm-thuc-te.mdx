---
title: '[Thá»±c chiáº¿n]-HÆ°á»›ng dáº«n Setup CephFS trÃªn mÃ´i trÆ°á»ng BareMetal / VM thá»±c táº¿'
description: '[Thá»±c chiáº¿n]-HÆ°á»›ng dáº«n Setup CephFS trÃªn mÃ´i trÆ°á»ng thá»±c táº¿'
date: '2021-05-18'
tags: ['Cloudnative', 'Storage', 'CephFS']
authors: ['bachdangtuan']
summary: '[Thá»±c chiáº¿n]-hÆ°á»›ng dáº«n triá»ƒn khai cÃ i Ä‘áº·t ceph trong mÃ´i trÆ°á»ng thá»±c táº¿ mang ra cháº¡y production ngon lÃ nh'
---

# Setup CephFS trÃªn mÃ´i trÆ°á»ng thá»±c táº¿
Äá»ƒ triá»ƒn khai cephFS trong mÃ´i trÆ°á»ng thá»±c táº¿ thÃ¬ chÃºng ta cáº§n chuáº©n bá»‹ nhÆ° sau:
## ğŸ“‘ Má»¥c Lá»¥c
1. [Chuáº©n bá»‹ mÃ¡y chá»§](#chuan-bi-may-chu)
2. [Tuning OS há»‡ thá»‘ng](#tuning-os-he-thong)
3. [CÃ i Ä‘áº·t há»‡ thá»‘ng CephFS](#cai-dat-ceph)
4. [Ká»‹ch báº£n má»Ÿ rá»™ng há»‡ thá»‘ng](#mo-rong-he-thong)
4. [Ká»‹ch báº£n xá»­ lÃ½ sá»± cá»‘ há»‡ thá»‘ng](#xu-ly-su-co)
---


<h2 id="chuan-bi-may-chu">ğŸ§° Chuáº©n bá»‹ mÃ¡y chá»§</h2>
Triá»ƒn khai trong mÃ´i trÆ°á»ng thá»±c táº¿ thÃ¬ chÃºng ta cáº§n chuáº©n bá»‹ cÃ¡c mÃ¡y chá»§ vá»›i thÃ´ng sá»‘ nhÆ° sau:
| MÃ´i trÆ°á»ng   | Sá»‘ lÆ°á»£ng VM| Ghi chÃº mÃ´ hÃ¬nh |
|-------------------------|----------------------|-----------------|
| Lab/Test/Dev (demo)      | 3-4 VM               | Gá»™p MON, MGR, MDS vÃ  OSD trÃªn cÃ¹ng node |
| UAT/Staging          | 5-6 VM            | TÃ¡ch vai trÃ², cÃ³ standby MDS |
| Production nhá»     | 6-8 VM           | HA Ä‘áº§y Ä‘á»§, MON quorum, MGR standby, MDS active/standby, OSD tÃ¡ch biá»‡t |
| Production lá»›n | 9-15+ VM             | Má»—i vai trÃ² cháº¡y node riÃªng, OSD nhiá»u disk, scale CephFS |


|MÃ´i trÆ°á»ng    | Ubuntu LTS phiÃªn báº£n | Kernel tá»‘i thiá»ƒu | RAM má»—i node | CPU má»—i node |
|-------------------------|----------------------|------------------|--------------|---------------|
| Lab/Test/Dev (demo)            | 20.04 hoáº·c 22.04     | â‰¥ 5.4            | 4 GB         | 2 vCPU        |
| Dev / Staging         | âœ… 22.04 LTS          | â‰¥ 5.15           | 6â€“8 GB       | 2â€“4 vCPU      |
| Production nhá» gá»n     | âœ… 22.04 LTS          | â‰¥ 5.15           | 8â€“16 GB      | 4 vCPU        |
| ğŸ¢ Production quy mÃ´ lá»›n | âœ… 22.04 hoáº·c âš ï¸24.04*   | â‰¥ 5.15           | 16â€“64 GB     | 8+ vCPU       |

> Ubuntu 24.04 má»›i ra, cáº§n kiá»ƒm chá»©ng thÃªm trÆ°á»›c khi dÃ¹ng cho production.
> TÃ¹y thuá»™c vÃ o sá»‘ lÆ°á»£ng OSD, MDS, MON, MGR mÃ  chÃºng ta cÃ³ thá»ƒ Ä‘iá»u chá»‰nh thÃ´ng sá»‘ RAM vÃ  CPU cho phÃ¹ há»£p vá»›i nhu cáº§u sá»­ dá»¥ng cá»§a mÃ¬nh.

<h2 id="tuning-os-he-thong">ğŸ§° Tuning OS há»‡ thá»‘ng</h2>

<h2 id="cai-dat-ceph">ğŸ§° CÃ i Ä‘áº·t há»‡ thá»‘ng CephFS</h2>

<h2 id="mo-rong-he-thong">ğŸ§° Ká»‹ch báº£n má»Ÿ rá»™ng há»‡ thá»‘ng</h2>

<h2 id="xu-ly-su-co">ğŸ§° Ká»‹ch báº£n xá»­ lÃ½ sá»± cá»‘ há»‡ thá»‘ng</h2>